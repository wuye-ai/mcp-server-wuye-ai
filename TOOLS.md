# CRIC物业AI 工具定义配置

## 什么是“工具功能集”？

当我们使用 MCP 客户端连接 MCP Server 时，按照 MCP 协议的定义，一般会先调用 `tools/list` 方法，列出所有可用的 Tool（工具），并将这些工具交给客户端的大模型选用。然而：

1. 不同的大模型或者智能体平台，其智力水平不一，优化适配的工具定义范式也各不相同。统一的工具定义，可能无法获得最佳效果。
2. 不同用户的需求不同，可能只需要购买和使用部分工具，而不是全部工具。未购买的工具，无法成功调用，反而会干扰模型的选择。 

因此，我们在 CRIC物业AI MCP Server 中引入了“工具功能集”（Feature Set）的概念，以此支持 MCP Server 的用户根据需要选用不同的工具定义范式。

## 什么是“使用工具英文名称”？

在 CRIC物业AI MCP Server 中，工具默认使用中文名称，以便于国内用户和国内中文大模型理解和使用。然而，为了兼容部分海外模型或智能体平台，我们提供了“英文工具名称”（Name EN）选项。启用时，Tool 名称将改为使用英文版本，以提高对部分海外模型的兼容性。对于支持中文工具名称的模型，如 Qwen、DeepSeek 等，建议不启用，以获得更好的效果。

## 有哪些“工具功能集”？

- `all`: 包含所有模块和工具的 **全面功能集**，适用于购买了并且确实需要全面功能模块的场景。包含的工具类型和数量较多，对大模型辨别、选择、规划工具使用的能力要求较高。
- `base`: 包含了“资讯日报”、“知识库”模块的 **基础功能集**，不含“智能问答”模块。“知识库”模块中，提供了“获取可用知识库列表”工具和通用的“搜索知识库”工具，需要大模型具备一定的工具规划能力，能正确地先调用“获取可用知识库列表”拿到知识库 ID，再用该 ID 进行知识库搜索。
- `organic`: 包含“资讯日报”、“智能问答”模块的 **有机功能集**，不含“知识库”模块。该功能集的能力与 CRIC物业AI 微信小程序一致。
- `detail`: 包含“资讯日报”、“知识库”模块的 **详细功能集**，不含“智能问答”模块。“知识库”模块中，不再提供“获取可用知识库列表”工具和通用的“搜索知识库”工具，但为每个可用的知识库提供了单独的带命名“搜索知识库”工具，不再需要大模型正确地先调用“获取可用知识库列表”拿到知识库 ID，减轻了一些智力负担。
- `ask`: 仅包含“智能问答”模块的 **问答功能集**。

## 🗺️ 功能集对应工具清单

| 工具中文名称              | 工具英文名称                                        | 功能描述                                                                                                                    | 核心参数                                                                                              | all | base | organic | detail | ask |
|---------------------|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|-----|------|---------|--------|-----|
| `获取资讯日报`            | `GetNewsForDate`                              | 获取资讯日报：根据YYYY-MM-DD形式的日期，获取当日物业行业资讯日报。                                                                                  | `date`(要获取资讯日报的日期，形如 YYYY-MM-DD。如果不提供，则默认为今天。建议使用两个月内的日期，更早的日期返回时间会较长。)                           | ✅   | ✅    | ✅       | ✅      | ❌   |
| `获取行业热点问题列表`        | `GetTrendingQuestions`                        | 获取行业热点问题列表：获取当前CRIC物业AI应用内物业行业热点问题的分类和列表，不包含回答。                                                                         | *无*                                                                                               | ✅   | ✅    | ✅       | ✅      | ❌   |
| `获取可用知识库列表`         | `ListAvailableKnowledgeBases`                 | 获取可用知识库列表：获取可用知识库列表，后续可以使用其中的知识库搜索相关知识。【请务必注意，调用“搜索知识库”工具前必须要先使用本工具，得到 UUID 形式的知识库 ID。】                                 | *无*                                                                                               | ✅   | ✅    | ❌       | ❌      | ❌   |
| `搜索知识库`             | `SearchKnowledgeBase`                         | 搜索知识库：指定具体知识库ID，以及具体查询的问题，获取知识库搜索结果，以文档片段或全文形式返回，供AI参考。【请务必注意，调用本工具前必须要先使用“获取可用知识库列表”工具，得到 UUID 形式的知识库 ID，否则无法成功调用本工具。】 | `knowledge_base_id`(知识库的 ID（UUID形式，来自“获取可用知识库列表”工具返回的结果）)、`query`(查询的问题) 等                        | ✅   | ✅    | ❌       | ❌      | ❌   |
| `搜索知识库：{{具体知识库名称}}` | `SearchKnowledgeBase-{{kb_id_first_8_chars}}` | 根据当前 Access Token 可用的知识库列表，自动生成的搜索某个具体知识库的工具，一般有多个。搜索具体的某个知识库，获取知识库搜索结果，以文档片段或全文形式返回，供AI参考。                             | `query`(查询的问题) 等                                                                                  | ❌   | ❌    | ❌       | ✅      | ❌   |
| `物业问题场景分析`          | `AnalyzeScene`                                | 物业问题场景分析：让 CRIC物业AI 帮助分析物业行业问题的场景，判断应搜索的知识库。                                                                            | `query`(问题)、`deep_reasoning_enabled`(启用深度思考)、`internet_search_enabled`(启用联网检索)、`chat_history`(历史问答记录。请提供你认为和问题相关的上下文问答记录，形式为文本数组。) 等 | ✅   | ❌    | ❌       | ✅      | ❌   |
| `问CRIC物业AI`         | `AskCRICWuyeAI`                               | 问CRIC物业AI：向CRIC物业AI提问，获得答案。                                                                                             | `query`(问题)、`deep_reasoning_enabled`(启用深度思考)、`internet_search_enabled`(启用联网检索)、`chat_history`(历史问答记录。请提供你认为和问题相关的上下文问答记录，形式为文本数组。) 等                                                                                     | ✅   | ❌    | ✅       | ❌      | ✅   |

## 如何配置“工具功能集”？

我们在为您生成 CRIC物业AI Access Token 时，会根据您购买的功能模块和应用场景，为您默认配置一个“工具功能集”。如果确实需要临时覆盖设置，您可以在 MCP Server 的环境变量中配置 `CRIC_WUYE_AI_FEATURE_SET`，或者在 SSE 调用的 URL Query 后面追加 `feature_set`，来覆盖默认的功能集。例如：

```sh
CRIC_WUYE_AI_FEATURE_SET=detail npx -y @wuye-ai/mcp-server-wuye-ai
```

```json
{
  "mcpServers": {
    "CRIC物业AI": {
      "transportType": "sse",
      "url": "https://mcp.wuye-ai.cricbigdata.com/sse/mcp?token={{您的 CRIC物业AI Access Token}}&feature_set=detail"
    }
  }
}
```

## 如何配置“使用工具英文名称”？

我们在为您生成 CRIC物业AI Access Token 时，会根据您的应用场景，为您默认配置是否“使用工具英文名称”。如果确实需要临时覆盖设置，您可以在 MCP Server 的环境变量中配置 `CRIC_WUYE_AI_NAME_EN`，或者在 SSE 调用的 URL Query 后面追加 `name_en`，来覆盖默认的配置。例如：

```sh
CRIC_WUYE_AI_NAME_EN=detail npx -y @wuye-ai/mcp-server-wuye-ai
```

```json
{
  "mcpServers": {
    "CRIC物业AI": {
      "transportType": "sse",
      "url": "https://mcp.wuye-ai.cricbigdata.com/sse/mcp?token={{您的 CRIC物业AI Access Token}}&name_en=true"
    }
  }
}
```
